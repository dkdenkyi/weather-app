<!DOCTYPE html>
<html>
    <head>
        <title>Exercise 11</title>
        <link href="styles.css" rel="stylesheet">
    </head>
    <body>
        <h1>Weather App</h1>
        <div  class="search-style">
            <label for="searchCity">Enter a city:</label>
            <input id="searchCity">  
            <button id="search">Search</button>
        </div>    
        <table id="products">
            <tr>
                <td>Temperature</td>
                <td id="temp"></td>
            </tr>
            <tr>
                <td>Wind</td>
                <td id="wind"></td>
            </tr>
            <tr>
                <td>Humidity</td>
                <td id="humidity"></td>
            </tr>
        </table>
        
        <script type='text/javascript' src='config.js'></script>
        <script>
            var mykey = config.MY_KEY;
            var secretkey = config.SECRET_KEY;

            let weatherJson = [];

            document.getElementById("search").addEventListener("click", () => {

                    let city = document.getElementById("searchCity").value;
                    let domain = "http://api.openweathermap.org/data/2.5/weather";
                   
                    fetch(`${domain}?q=${city}&APPID=${mykey}`)
                        .then(response=> response.json())
                        .then(json => {
                        weatherJson = json
                        console.log(weatherJson);

                        const temperature = weatherJson.main.temp;
                        const wind = weatherJson.wind.speed;
                        const humidity = weatherJson.main.humidity;

                        document.getElementById("temp").textContent = (parseFloat(temperature)-273.15).toFixed(2) + " Â°C";
                        document.getElementById("wind").textContent = wind + " m/s";
                        document.getElementById("humidity").textContent = humidity+ "%";
                        })
                    }
                )
    
        </script>
    </body>
</html>